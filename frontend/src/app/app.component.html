<div class="main-layout">

  <nav class="navbar" *ngIf="!isHomePage && !isAuthPage">

    <!-- 1. Busca Central (Agora contém a Logo) -->
    <div class="nav-search-box">
      <app-search [isCompact]="true"></app-search>
    </div>

    <!-- 2. Botões da Direita (Sets + Random) -->
    <div class="nav-actions">
      <!-- Sets -->
      <a routerLink="/sets" class="nav-btn" title="Visualizar Expansões">
        <mat-icon>style</mat-icon>
        <span>Expansões</span>
      </a>

      <!-- Random -->
      <button class="nav-btn" (click)="onRandomCard()" title="Carta Aleatória">
        <mat-icon>shuffle</mat-icon>
        <span>Random</span>
      </button>

      <!-- Menu Hamburger -->
      <div class="header-menu-wrapper">
        <button class="nav-btn menu-toggle" (click)="toggleMenu()">
          <mat-icon>{{ isMenuOpen ? 'close' : 'menu' }}</mat-icon>
        </button>

        @if (isMenuOpen) {
        <div class="dropdown-menu">
          @if (!isLoggedIn) {
          <a routerLink="/login" class="menu-item"><mat-icon>login</mat-icon> Entrar</a>
          <a routerLink="/register" class="menu-item"><mat-icon>person_add</mat-icon> Criar Conta</a>
          }

          @if (isLoggedIn) {
          <a routerLink="/account" class="menu-item"><mat-icon>account_circle</mat-icon> Minha Conta</a>
          <a routerLink="/watchlist" class="menu-item"><mat-icon>favorite</mat-icon> Watchlist</a>
          <div class="menu-divider"></div>
          <button (click)="logout()" class="menu-item logout"><mat-icon>logout</mat-icon> Sair</button>
          }
        </div>
        }
      </div>
    </div>
  </nav>

  <main class="content-area">
    <router-outlet></router-outlet>
    <app-footer></app-footer>
  </main>

</div>